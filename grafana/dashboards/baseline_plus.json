{
  "title": "Baseline+ ETL & Academia",
  "tags": ["baseline+", "academico"],
  "panels": [
    { "type": "stat", "title": "Worker Up", "id": 1, "targets": [ { "expr": "up{job=\"worker\"}" } ], "options": { "reduceOptions": { "calcs": ["last"] } }, "gridPos": { "h": 4, "w": 4, "x": 0, "y": 0 } },
    { "type": "timeseries", "title": "Procesados/s", "id": 2, "targets": [ { "expr": "rate(worker_messages_processed_total[1m])" } ], "gridPos": { "h": 8, "w": 10, "x": 4, "y": 0 } },
    { "type": "timeseries", "title": "Errores/s", "id": 3, "targets": [ { "expr": "rate(worker_messages_failed_total[1m])" } ], "gridPos": { "h": 8, "w": 10, "x": 14, "y": 0 } },
    { "type": "timeseries", "title": "Latencia P95 (s)", "id": 4, "targets": [ { "expr": "histogram_quantile(0.95, sum(rate(worker_message_latency_seconds_bucket[5m])) by (le))" } ], "gridPos": { "h": 8, "w": 10, "x": 0, "y": 8 } },
    { "type": "timeseries", "title": "RabbitMQ: mensajes listos (etl)", "id": 5, "targets": [ { "expr": "rabbitmq_queue_messages_ready{queue=\"etl\"}" } ], "gridPos": { "h": 8, "w": 10, "x": 10, "y": 8 } },
    { "type": "timeseries", "title": "RabbitMQ: en vuelo (etl)", "id": 6, "targets": [ { "expr": "rabbitmq_queue_messages_unacked{queue=\"etl\"}" } ], "gridPos": { "h": 8, "w": 10, "x": 20, "y": 8 } },
    { "type": "timeseries", "title": "Postgres: conexiones", "id": 7, "targets": [ { "expr": "pg_stat_activity_count" } ], "gridPos": { "h": 8, "w": 10, "x": 0, "y": 16 } },
    { "type": "timeseries", "title": "Postgres: bloques le√≠dos (I/O)", "id": 8, "targets": [ { "expr": "rate(pg_stat_database_blks_read[1m])" } ], "gridPos": { "h": 8, "w": 10, "x": 10, "y": 16 } },
    { "type": "stat", "title": "Alertas activas (Prometheus)", "id": 9, "targets": [ { "expr": "sum(ALERTS{alertstate=\"firing\"})" } ], "options": { "reduceOptions": { "calcs": ["last"] } }, "gridPos": { "h": 4, "w": 6, "x": 20, "y": 16 } },
    { "type": "table", "title": "Top 10 Materias (2024A)", "id": 30, "datasource": "PostgreSQL Academico", "targets": [ { "format": "table", "rawSql": "SELECT * FROM marts.top_materias('2024A',10);" } ], "gridPos": { "h": 10, "w": 12, "x": 0, "y": 28 } },
    { "type": "table", "title": "Ranking de Maestros", "id": 31, "datasource": "PostgreSQL Academico", "targets": [ { "format": "table", "rawSql": "SELECT * FROM marts.ranking_maestros LIMIT 15;" } ], "gridPos": { "h": 10, "w": 12, "x": 12, "y": 28 } },
    { "type": "table", "title": "Alumnos en riesgo (2024B)", "id": 32, "datasource": "PostgreSQL Academico", "targets": [ { "format": "table", "rawSql": "SELECT * FROM marts.alumnos_en_riesgo WHERE periodo='2024B' LIMIT 20;" } ], "gridPos": { "h": 10, "w": 24, "x": 0, "y": 38 } }
  ],
  "schemaVersion": 39,
  "version": 2
}
